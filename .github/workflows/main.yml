name: Trello Job Scraper Test

on:
  schedule:
     - cron: '*/30 * * * *'
  workflow_dispatch:

jobs:
  post-to-trello:
       runs-on: ubuntu-latest
       env:
         TRELLO_KEY: ${{ secrets.TRELLO__KEY }}
         TRELLO_TOKEN: ${{ secrets.TRELLO_TOKEN }}
         TRELLO_LIST_ID: ${{ secrets.TRELLO_LIST_ID }}
       steps:
         - name: Post to Trello
           run: |
             curl -X POST "https://api.trello.com/1/cards" \
               -H "Content-Type: application/x-www=form-urlencoded" \
               --data-urlencode "name=New Jobs: $(date +%d %b %h:%M')" \
               --data-urlencode "desc=Scraped job from GitHub Action test" \
               --data-urlencode "idLabels=60e2a5c5ef5b1b2d4fb2cb28" \
               --data-urlencode "idList=${{ secrets.TRELLO_LIST_ID }}" \
               --data-urlencode "key=${{ secrets.TRELLO_KEY }}" \
               --data-urlencode "token${{ secrets.TRELLO_TOKEN }}"
